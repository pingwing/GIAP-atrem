var formatWFS=new ol.format.WFS,transactWFS=function(){_.each(editableLayers,function(b){var a=new ol.format.GML({featureNS:"atrem",featureType:b.layerName,srsName:b.srsName}),d=featuresToInsert[b.layerName],g=featuresToDelete[b.layerName],e=[];_.each(_.values(featuresToUpdateObject[b.layerName]),function(a){var c=a.getGeometry().clone();c.applyTransform(getTransformFunction(b.srsName));"EPSG:2180"===b.srsName&&c.applyTransform(transformationFlipCoords);"EPSG:2179"===b.srsName&&c.applyTransform(transformationFlipCoords);
a.set("geom",c);e.push(a)});var f=[];_.each(d,function(a){var c=a.getGeometry().clone();c.applyTransform(getTransformFunction(b.srsName));a.set("geom",c);f.push(a)});d=f.length+e.length+g.length;a=formatWFS.writeTransaction(f,e,g,a);0<d&&(removeLowerCaseGeometryNodeForInsert(a),removeNodeForWfsUpdate(a,"geometry"),a=(new XMLSerializer).serializeToString(a),$.ajax("http://uslugi.giap.pl/geoserver/wfs",{type:"POST",dataType:"xml",processData:!1,contentType:"text/xml",data:a}).done())})};
